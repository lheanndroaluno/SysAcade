<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset= UTF-8" />
	<title>Teste PrimeFaces</title>
	<h:outputScript library="js" name="scripts.js" />
	<h:outputStylesheet library="css" name="estiloAgenda.css" />
</h:head>

<h:body>

	<p:growl id="mensagem" />

	<h:form>

		<p:toolbar style="margin-top: 5px; margin-bottom: 12px">

			<f:facet name="right">

				<p:commandButton value="Página Inicial"
					icon="ui-icon-arrowreturnthick-1-n" />

			</f:facet>

		</p:toolbar>

			<p:panelGrid columnClasses="value">

				<p:schedule id="schedule" widgetVar="agenda"
					value="#{eventoBean.eventoModelo}" timeZone="GMT-3" locale="pt_BR"
					timeFormat="HH:mm" displayEventEnd="true">

					<p:ajax event="eventSelect" listener="#{eventoBean.selecionado}"
						oncomplete="PF('dialogo').show();" update="painel" />

					<p:ajax event="dateSelect" listener="#{eventoBean.novo}"
						oncomplete="PF('dialogo').show();" update="painel" />

					<p:ajax event="eventMove" listener="#{eventoBean.movido}"
						update="mensagem" />

					<p:ajax event="eventResize" listener="#{eventoBean.redimensionar}"
						update="mensagem schedule" />

				</p:schedule>

			</p:panelGrid>

		<p:dialog header="Criar Evento" resizable="false" draggable="false"
			modal="true" closable="false" widgetVar="dialogo">

			<h:panelGrid id="painel" columns="2">

				<p:outputLabel for="titulo" value="Título do Evento: " />
				<p:inputText id="titulo" maxlength="30" size="30"
					value="#{eventoBean.evento.titulo}" required="true"
					requiredMessage="O campo 'Título do Evento' é obrigatório"
					converter="converterUpperCase">

					
				</p:inputText>

				<p:outputLabel for="descricao" value="Descrição: " />
				<p:inputTextarea id="descricao" maxlength="100"
					value="#{eventoBean.evento.descricao}" required="true"
					requiredMessage="O campo 'Descrição do Evento' é obrigatório"
					rows="5" cols="50" autoResize="false"
					converter="converterUpperCase">

					
				</p:inputTextarea>
				
				<p:outputLabel value="Início do Evento: " />
				<p:calendar value="#{eventoBean.evento.inicioEvento}" 
						size="10" locale="pt_BR" timeZone="America/Recife" mask="true"/>
				
				<p:outputLabel value="Fim do Evento: " />
				<p:calendar value="#{eventoBean.evento.fimEvento}" 
						size="10" locale="pt_BR" timeZone="America/Recife" mask="true"/>
				

				<p:outputLabel value="Status: " />
				<p:selectBooleanCheckbox value="#{eventoBean.evento.status}" />

				<p:outputLabel for="usuario" value="Usuário: " />
				<p:selectOneMenu id="usuario" value="#{eventoBean.evento.usuario}"
					converter="omnifaces.SelectItemsConverter" filter="true">

					<f:selectItem noSelectionOption="true"
						itemLabel="Selecione um usuário" />

					<f:selectItems value="#{eventoBean.usuarios}" var="usuario"
						itemValue="#{usuario}" itemLabel="#{usuario.pessoa.nome}" />
				</p:selectOneMenu>

			</h:panelGrid>

			<br />
			<br />
			<p:separator />

			<p:commandButton value="Salvar" actionListener="#{eventoBean.salvar}"
				icon="ui-icon-disk"
				oncomplete="PF('agenda').update();PF('dialogo').hide();"
				update="mensagem schedule" />

			<p:commandButton value="Cancelar" icon="ui-icon-cancel"
				process="@this" oncomplete="PF('dialogo').hide();" />

		</p:dialog>
		
	</h:form>

</h:body>

</html>